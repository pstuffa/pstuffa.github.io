!function(e){"use strict";function t(t){e.extend(this,t),this.$el=e(t.el),this.$iframe=d("about:blank").appendTo(this.$el),this.render(),this.handleIframeLoaded()}function a(t){var a=e(window).width();t.params.ss="l",(void 0===t.width||void 0===t.height||void 0===t.params.sz||a>t.smallMaxWidth&&r<=t.smallMaxWidth||a<=t.smallMaxWidth&&r>t.smallMaxWidth)&&(a>t.smallMaxWidth?"cube"==t.type||"shrinky-cube"==t.type?(t.width=300,t.height=250):(t.width=728,t.height=90):(t.params.ss="s","cube"==t.type?(t.width=300,t.height=250):(t.width=320,t.height=50)),t.params.sz=t.width+"x"+t.height),r=a}function d(t,a,d){return"undefined"==typeof a&&(a=0),"undefined"==typeof d&&(d=0),e(document.createElement("IFRAME")).attr({width:a,height:d,scrolling:"no",seamless:!0,frameBorder:0,src:t})}var i=Math.floor(1e16*Math.random()),r=e(window).width(),n=0,h=0,o=0;t.prototype.render=function(){var t=this.iframeUrl+"?iu="+encodeURIComponent(this.path)+"&"+e.param(this.params)+"&ord="+i+"&c="+i;this.debug&&(console.log(t),console.log(this.$iframe.attr("src"))),t!=this.$iframe.attr("src")&&(this.$el.empty(),this.$iframe=d(t,this.width,this.height).appendTo(this.$el),this.handleIframeLoaded())},t.prototype.destroy=function(){this.$el.empty().removeData("advert-view")},t.prototype.update=function(t){return e.extend(this,t)},t.prototype.handleIframeLoaded=function(){var t=this;t.$iframe.load(function(){var a=t.$iframe.contents().find("#div-gpt-ad").height();a?("cube"==t.type&&a>=600&&t.$iframe.attr("height",600),t.$iframe.show()):t.$iframe.hide(),e("body").trigger("ad-loaded")})},e.fn.ad=function(d){if("string"!=typeof d){if("undefined"==typeof d&&(d={debug:e.fn.ad.defaults.debug}),"undefined"==typeof d.params&&(d.params={}),"undefined"==typeof d.path){if("undefined"==typeof e("body").data("ad-path"))return this;d.path=e("body").data("ad-path")}if("undefined"==typeof d.params.ptype){if("undefined"==typeof e("body").data("ad-ptype"))return this;d.params.ptype=e("body").data("ad-ptype")}"undefined"==typeof d.smallMaxWidth&&(d.smallMaxWidth="undefined"!=typeof e("body").data("ad-small-max-width")?e("body").data("ad-small-max-width"):e.fn.ad.defaults.smallMaxWidth),"undefined"==typeof d.iframeUrl&&(d.iframeUrl="undefined"!=typeof e("body").data("ad-iframe-url")?e("body").data("ad-iframe-url"):e.fn.ad.defaults.iframeUrl),d.params.ss=!1,"undefined"==typeof d.params.rg&&(d.params.rg="ur"),n=0,h=this.length,o=0;var r,s=this;return e(window).off(".ad"),e(window).on("resize.ad",function(){clearTimeout(r),r=setTimeout(function(){s.ad()},200)}),this.each(function(i){if(e(this).is(":hidden")&&e.hasData(this)&&e(this).data("advert-view"))return e(this).data("advert-view").destroy(),void 0;var r=e.extend(!0,{el:this,type:e(this).data("ad-type")||e.fn.ad.defaults.type},d);a(r),n++,r.params.tile=n,"leaderboard"===r.type?(0===i&&(r.params.pos="T"),i===h&&(r.params.pos="b")):"cube"===r.type?(o++,r.params.pos=o):"shrinky-cube"===r.type&&"l"===r.params.ss&&(o++,r.params.pos=o),e.hasData(this)&&e(this).data("advert-view")?e(this).data("advert-view").update(r).render():e(this).data("advert-view",new t(r))})}return"refresh"===d?(this.length>0&&(i=Math.floor(99999999*Math.random()),e("body").trigger("ad-refresh")),this.each(function(){e.hasData(this)&&e(this).data("advert-view").render()})):void 0},e.fn.ad.defaults={type:"leaderboard",iframeUrl:"ad-iframe.html",smallMaxWidth:768,debug:!1},e("body").on("ad-refresh",function(){"object"==typeof s&&(s.events="",s.t())}),e(document).ready(function(){e(".advert").ad()})}(jQuery);
//# sourceMappingURL=ads.min.map
