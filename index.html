<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>pstuffa</title>

    <script src="./shared/js/vendor/d3/d3.min.js"></script>
    <link href="./shared/css/welcome.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Crete+Round|Pacifico" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Special+Elite" rel="stylesheet">
  <body>

    <div id="welcome">
    </div>
    <div id="titles">
      <h1 class='title'> Paul Buffa </h1>
      <h3 class='sub-title'> Data Visualization Developer </h3>
      <p class='contact'> Contact me on <a href='https://www.linkedin.com/in/paul-buffa/'>LinkedIn</a> or <a href='https://twitter.com/pstuffa'>Twitter</a> </p> 
      <p class='scroll'> Scroll down for examples of my work</p>
    </div>
    <div id="gifs">
      <h2 class='project-title'> Hover over for more details </h2>
    </div>


<!--       <img src='./shared/gifs/natgeo.gif' height="250px">
      <img src='./shared/gifs/streeteasy.gif' height="250px">
      <img src='./shared/gifs/550.gif' height="250px">
      <img src='./shared/gifs/prospect.gif' height="250px">
      <img src='./shared/gifs/jiggle.gif' height="250px">
      <img src='./shared/gifs/run.gif' height="250px">
      <img src='./shared/gifs/run4.gif' height="250px">
      <img src='./shared/gifs/run5.gif' height="250px">
      <img src='./shared/gifs/run6.gif' height="250px">
      <img src='./shared/gifs/yvaralswave.gif' height="250px">
      <img src='./shared/gifs/process.gif' height="250px">
      <img src='./shared/gifs/zebra.gif' height="250px">
      <img src='./shared/gifs/morphing.gif' height="250px">
      <img src='./shared/gifs/noisey.gif' height="250px"> -->
<!--     <div id="projects">
      <h1> Projects </h1>
      <div class='project-list'>
        <div class='project'>
          <h3> National Geographic </h3>
        </div>
        <div class='project'>
          <h3> Observable </h3>
        </div>
        <div class='project'>
          <h3> Teaching </h3>
            <h2> Metis </h2>
            <h2> ITP </h2>
        </div>
        <div class='project'>
          <h3> Streeteasy </h3>
        </div>
        <div class='project'>
          <h3> Causaly </h3>
        </div>
      </div>
    </div> -->

  </body>

</html>

<script>

const margin = ({top: 20, bottom: 20, left: 20, right: 20})
const height = window.innerHeight 
const width = window.innerWidth * .9
const multiplier = 20;
const svgHeight = height * multiplier;
const gifHeight = 260;
const thickWidth = width / 75;
const thinWidth = thickWidth / 4;

d3.select("#titles").style("top", `${height * (2/4)}px`)

const gifsData = [
  { width: 600, height: 484, src:'./shared/gifs/natgeo.gif', descr: 'A data visualization piece I wrote about tracking immigrant community integration using Twitter data.', title: 'National Geographic', link: 'https://www.nationalgeographic.com/culture/2018/09/researchers-using-twitter-data-immigration-migration-graphic/'},
  { width: 600, height: 304, src:'./shared/gifs/streeteasy.gif', descr: 'A tool I made in collaboration with Streeteasy for potentional homeowners to know how long until they will break even in their investment.', title: 'Streeteasy', link: 'https://streeteasy.com/tippingpoint'},
  { width: 700, height: 538, src:'./shared/gifs/550.gif', descr: 'A project I am working on taking multiple open source datasets and combining them to paint a picture of how condominiums sell their apartments.', title: 'Apartment Analysis', link: 'https://beta.observablehq.com/@pstuffa/550-vanderbilt'},
  { width: 400, height: 288, src:'./shared/gifs/prospect.gif', descr: 'A visualization of building permits issued in the Brooklyn neighborhood, Prospect Heights.', title: 'Prospect Heights', link: 'https://beta.observablehq.com/@pstuffa/nyc-building-permits-api-prospect-heights/2'},
  { width: 500, height: 437, src:'./shared/gifs/jiggle.gif', descr: 'I taught a two part workshop at ITP, an NYU program. This is one of the notebooks we went through in the class.', title: 'ITP Workshop', link: 'https://beta.observablehq.com/@pstuffa/making-maps-with-nyc-open-data'},
  { width: 500, height: 298, src:'./shared/gifs/run.gif', descr: 'Part of a series of visualizations about running metrics. This is the first part of the series.', title: 'Visualizing Running I', link: 'https://beta.observablehq.com/@pstuffa/visualizing-running-part-i'},
  { width: 1000, height: 612, src:'./shared/gifs/run4.gif', descr: 'Part of a series of visualizations about running metrics. This is part six of the series.', title: 'Visualizing Running VI', link: 'https://beta.observablehq.com/@pstuffa/visualizing-running-part-vi'},
  { width: 1000, height: 859, src:'./shared/gifs/run5.gif', descr: 'Part of a series of visualizations about running metrics. This is part five of the series.', title: 'Visualizing Running V', link: 'https://beta.observablehq.com/@pstuffa/visualizing-running-part-v'},
  { width: 500, height: 365, src:'./shared/gifs/run6.gif', descr: 'Part of a series of visualizations about running metrics. This is part seven of the series.', title: 'Visualizing Running VII', link: 'https://beta.observablehq.com/@pstuffa/visualizing-running-part-vii'},
  { width: 600, height: 600, src:'./shared/gifs/process.gif', descr: 'A recreation in D3 of Op Art by Jean-Pierre Vasarely, aka Yvaral', title: 'Yvaral', link: 'https://beta.observablehq.com/@pstuffa/yvaral-in-d3'},
  { width: 400, height: 400, src:'./shared/gifs/yvaralswave.gif', descr: 'Another recreation in D3 of Op Art by Jean-Pierre Vasarely, aka Yvaral', title: 'Yvaral II', link: 'https://beta.observablehq.com/@pstuffa/yvaral-ii'},
  { width: 500, height: 224, src:'./shared/gifs/morphing.gif', descr: 'An exploration for how to create inkblots using D3', title: 'Rorschach Tests', link: 'https://beta.observablehq.com/@pstuffa/making-inkblots-in-d3'},
  { width: 500, height: 461, src:'./shared/gifs/noisey.gif', descr: 'An exploration into recreating the famous piece by Bridget Riley, Blaze 1964', title: 'Bridget Riley', link: 'https://beta.observablehq.com/@pstuffa/bridget-riley'}
]

const generateData = (n) => {

  const points = d3.range(n).map(Object);

  points.forEach((d, i) => {
    if(Math.floor(i/3) % 2 == 0) {
      if(i % 3 == 1) {
        d.x = .0
      } else if (i % 3 == 2) {
        d.x = .5
      } else {
        d.x = .5
      }
      d.y = i;
    } else {
      if(i % 3 == 1) {
        d.y = .0
      } else if (i % 3 == 2) {
        d.y = .5
      } else {
        d.y = .5
      }
      d.x = i;
    }
  })

  return points
}

 const n = 50;
 const data = generateData(n);
 data.unshift({x: -.25, y: -10});
 data.push({x: .5, y: n });
 data.push({x: .5, y: n * (multiplier + 5)});
  
 const heightScale = d3.scaleLinear()
    .domain([0, n])
    .range([0, height]);
  
 const widthScale = d3.scaleLinear()
    .domain([0, n])
    .range([0, width]);
  
 const line = d3.line()
   .curve(d3.curveBasis)
   .x(d => widthScale(d.x))
   .y(d => heightScale(d.y));
 
 const svg = d3.select("#welcome")
    .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", svgHeight + margin.top + margin.bottom)

  const g = svg.append("g")
    .attr("transform",`translate(${margin.left}, ${margin.top})`)

  const pathTwo = g.append("path")
   .datum(data)
   .attr("d", line)
   .style("stroke", '#000')
   .style("stroke-width", thickWidth)
   .style("fill", "none")
  
 const path = g.append("path")
   .datum(data)
   .attr("d", line)
   .style("stroke", '#33ccff')
   .style("stroke-width", thinWidth)
   .style("fill", "none")
        .attr("stroke-dasharray",  `${width / 2} ${width / 2} 10 10 10 10 10 10 10 10` )
        .attr("stroke-dashoffset", width)
 
  let strokeOffset = 0;
  const t = d3.interval(function() {
    strokeOffset -= 1
    path.transition()
      .duration(1)
      .style("stroke-dashoffset", strokeOffset)
  }, 10)


  // Projects 
  const gifContainer = d3.select("#gifs")
    .style("top",`${margin.top + height + (width > 800 ? 0 : 50)}px`)
    .style("max-width", `${width}px`)

  const gifGroup = gifContainer.selectAll(".gif-group")
    .data(gifsData)
  .enter().append("div")
    .attr("class", "gif-group")
    .style("width", d => `${d.width / (d.height / gifHeight)}px`)
    .style("height", `${gifHeight}px`)
    // .style("border", "1px solid #000")
    .on("mouseenter", function() {
      d3.select(this).select(".hover-text")
        .transition()
        .style("opacity", .85)
    })
    .on("mouseleave", function() {
      d3.select(this).select(".hover-text")
        .transition()
        .style("opacity", 0)
    })

gifGroup.append("img")
    .attr("src", d => d.src)
    .attr("height", `${gifHeight}px`)
    .attr("width", d => `${d.width / (d.height / gifHeight)}px`)
  
gifGroup.append("div")
    .style("width", d => `${d.width / (d.height / gifHeight)}px`)
    .style("max-width", d => `${d.width / (d.height / gifHeight)}px`)
    .style("height", `${gifHeight}px`)
    .style("background-color", "#000")
    .style("opacity", 0)
    .attr("class", "hover-text")
    .html(d => { return `<h5 class='tiny-title'>${d.title}</h5><br /><p>${d.descr}</p><br /><br /><a href='${d.link}'>Click here to see the work </a>`})


</script>